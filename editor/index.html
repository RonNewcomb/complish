<html>
  <head>
    <title>Complish IDE</title>
    <meta name="Description" content="An online editor for Complish" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script type="module" src="script/main.js" defer></script>
    <link rel="stylesheet" type="text/css" href="css/layout.css" />
    <link rel="stylesheet" type="text/css" href="css/tooltips.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
  </head>

  <body>
    <load-html src="html/main menu.html"></load-html>

    <load-html src="html/flex-row.html">
      <div class="leftsidebar"></div>
      <div id="main" class="main"></div>
    </load-html>

    <script>
      /* tiniest UI framework ever */

      const loadHtml = el => Array.from(el.querySelectorAll("load-html")).map(load1Html);

      const load1Html = el =>
        fetch(el.attributes.src.value)
          .then(response => response.text())
          .then(html => (el.innerHTML = html.replace(/{{innerHTML}}/g, el.innerHTML)))
          .then(_ => Array.from(el.querySelectorAll("script")).map(s => eval(s.innerHTML)))
          .then(_ => loadHtml(el));

      loadHtml(document.body);
    </script>
  </body>
</html>
