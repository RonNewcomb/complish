<html>
  <head>
    <title>Complish IDE</title>
    <meta name="Description" content="An online editor for Complish" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/tooltips.css" />
    <link rel="stylesheet" type="text/css" href="css/parts-of-speech.css" />
  </head>

  <body>
    <main-menu></main-menu>

    <flex-row>
      <div class="panel leftsidebar"></div>
      <div class="panel" id="main"></div>
    </flex-row>

    <script type="module">
      import "./script/main.js";
      /* the "render once" UI framework */

      const loadHtml = element =>
        Array.from(element.querySelectorAll("*"))
          .filter(el => el.tagName.includes("-"))
          .map(load1Html);

      const load1Html = el =>
        fetch("html/" + el.tagName + ".html")
          .then(response => response.text())
          .then(html => (el.innerHTML = html.replace(/{{innerHTML}}/g, el.innerHTML)))
          .then(_ => Array.from(el.querySelectorAll("script")).map(s => eval(s.innerHTML)))
          .then(_ => loadHtml(el));

      loadHtml(document.body);
    </script>
  </body>
</html>
