<html>
  <head>
    <script type="module" src="script/main.js" defer></script>
    <link rel="stylesheet" type="text/css" href="css/layout.css" />
    <link rel="stylesheet" type="text/css" href="css/mainMenu.css" />
    <link rel="stylesheet" type="text/css" href="css/tooltips.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
  </head>

  <body>
    <load-html src="html/main menu.html"></load-html>

    <load-html src="html/hello.html"></load-html>

    <load-html src="html/hello.html" id="reloadable"></load-html>

    <button onclick="load1Html(document.getElementById('reloadable'))">Rerender</button>

    <div class="wrapper">
      <div class="leftsidebar"></div>
      <div id="main" class="main"></div>
    </div>

    <script>
      /* tiniest UI framework ever */

      const loadHtml = el => Array.from(el.querySelectorAll("load-html")).map(load1Html);

      const load1Html = el =>
        fetch(el.attributes.src.value)
          .then(response => response.text())
          .then(html => (el.innerHTML = html))
          .then(_ => Array.from(el.querySelectorAll("script")).map(s => eval(s.innerHTML)))
          .then(_ => loadHtml(el));

      loadHtml(document.body);
    </script>
  </body>
</html>
